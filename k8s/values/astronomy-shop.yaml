
# k8s/values/astronomy-shop.yaml
# Compatible with opentelemetry-demo chart v0.31.0

# 1. Global Configuration
default:
  env:
    - name: OTEL_SERVICE_NAME
      value: "astro-demo-app"
    - name: OTEL_COLLECTOR_NAME
      value: "alloy-app-gateway"
    # ✅ UPDATED: Connects to Alloy App Gateway
    - name: OTEL_EXPORTER_OTLP_ENDPOINT
      value: "http://alloy-app-gateway.observability-prd.svc:4317"
    - name: OTEL_RESOURCE_ATTRIBUTES
      value: "service.name=astro-demo-app,space=devteam-1,deployment.environment=production"

# 2. Components
components:
  loadgenerator:
    enabled: true
    env:
      # ✅ UPDATED: Connects to Alloy App Gateway
      - name: OTEL_EXPORTER_OTLP_ENDPOINT
        value: "http://alloy-app-gateway.observability-prd.svc:4317"
   
  frontendProxy:
    service:
      type: ClusterIP
      port: 8080

# 3. Disable Internal Stack (Use our own Mimir/Loki/Tempo)
opentelemetry-collector: { enabled: false }
jaeger: { enabled: false }
prometheus: { enabled: false }
grafana: { enabled: false }
opensearch: { enabled: false }